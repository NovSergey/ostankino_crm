{% extends "base.html" %}

{% block title %}Работники - CRM Пропусков{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet" href="{{ url_for('static', path='/table/style.css') }}">
<link rel="stylesheet" href="{{ url_for('static', path='/filters/style.css') }}">
{% endblock %}

{% block content %}
<h2 class="title">Работники</h2>

<div class="controls">
    <div class="actions">
        <button class="btn-primary" onclick="window.location.href = '/employees/add'"><i class="fa-solid fa-user-plus"></i> Добавить работника</button>
    </div>
    <div class="search-filter">
        <input class="filter" type="text" id="searchName" placeholder="Поиск по ФИО...">
    </div>
    <div class="search-filter">
        <input class="filter" type="tel" id="searchPhone" placeholder="Поиск по телефону...">
    </div>
    
    <div class="custom-select-wrapper">
        <select id="searchGroup" class="custom-select filter">
            <option value="">Выберите группу</option>
        </select>
    </div>
    <div class="custom-select-wrapper">
        <select id="searchObject" class="custom-select filter">
            <option value="">Выберите объект</option>
        </select>
    </div>

</div>

<div class="table-container">
    <table id="dataTable">
        <thead>
            <tr>
                <th class="hide-on-small">ID</th>
                <th>ФИО</th>
                <th class="hide-on-small">Телефон</th>
                <th>Объект</th>
                <th>Группа</th>
                <th class="hide-on-small">Таблица разрывов</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>
</div>

<!-- Модальное окно -->
<div id="modal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <div class="modal-body">
            <h3>Детали записи</h3>
            <p><strong>ID:</strong> <a id="modalId" target="_blank"></a></p>
            <p><strong>ФИО:</strong> <span id="modalName"></span></p>
            <p><strong>Телефон:</strong> <span id="modalPhone"></span></p>
            <p><strong>Объект:</strong> <span id="modalObject"></span></p>
            <p><strong>Группа:</strong> <span id="modalGroup"></span></p>
            <p><strong>Таблица разрывов:</strong> <span id="modalSanitaryTable"></span></p>
        </div>        
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', path='/base/imask.min.js') }}"></script>
<script src="{{ url_for('static', path='/employees/script.js') }}"></script>
{% endblock %}
